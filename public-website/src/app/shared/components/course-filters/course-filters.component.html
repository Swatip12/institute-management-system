<div class="course-filters">
  <!-- Search Bar -->
  <div class="search-section">
    <div class="search-bar">
      <input
        type="text"
        [value]="filterValues.searchTerm"
        (input)="onSearchInput($event)"
        placeholder="Search courses by name, description, category, or instructor..."
        class="search-input"
        [disabled]="isLoading"
      >
      <div class="search-icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
      </div>
      <button 
        *ngIf="filterValues.searchTerm" 
        (click)="onSearchInput({target: {value: ''}} as any)"
        class="clear-search-btn"
        type="button"
      >
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    
    <!-- Real-time search indicator -->
    <div class="search-status" *ngIf="filterValues.searchTerm">
      <span class="search-results">
        {{ filteredResults }} result{{ filteredResults !== 1 ? 's' : '' }} found
      </span>
    </div>
  </div>

  <!-- Filter Controls -->
  <div class="filters-row">
    <!-- Category Filter -->
    <div class="filter-group">
      <label for="category-filter" class="filter-label">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 4h6v6H4zM14 4h6v6h-6zM4 14h6v6H4zM14 14h6v6h-6z"></path>
        </svg>
        Category
      </label>
      <select
        id="category-filter"
        [value]="filterValues.selectedCategory"
        (change)="onCategoryChange($any($event.target).value)"
        class="filter-select"
        [disabled]="isLoading"
      >
        <option value="">All Categories</option>
        <option *ngFor="let category of filterOptions.categories" [value]="category">
          {{ category }}
        </option>
      </select>
    </div>

    <!-- Level Filter -->
    <div class="filter-group">
      <label for="level-filter" class="filter-label">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 3h18v18H3zM9 9h6v6H9z"></path>
        </svg>
        Level
      </label>
      <select
        id="level-filter"
        [value]="filterValues.selectedLevel"
        (change)="onLevelChange($any($event.target).value)"
        class="filter-select"
        [disabled]="isLoading"
      >
        <option value="">All Levels</option>
        <option *ngFor="let level of filterOptions.levels" [value]="level">
          {{ level }}
        </option>
      </select>
    </div>

    <!-- Duration Filter -->
    <div class="filter-group">
      <label for="duration-filter" class="filter-label">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12,6 12,12 16,14"></polyline>
        </svg>
        Duration
      </label>
      <select
        id="duration-filter"
        [value]="filterValues.selectedDuration"
        (change)="onDurationChange($any($event.target).value)"
        class="filter-select"
        [disabled]="isLoading"
      >
        <option value="">All Durations</option>
        <option *ngFor="let duration of filterOptions.durations" [value]="duration">
          {{ duration }}
        </option>
      </select>
    </div>

    <!-- Sort Controls -->
    <div class="filter-group sort-group">
      <label for="sort-filter" class="filter-label">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 6h18M7 12h10m-7 6h4"></path>
        </svg>
        Sort by
      </label>
      <div class="sort-controls">
        <select
          id="sort-filter"
          [value]="filterValues.sortBy"
          (change)="onSortChange($any($event.target).value)"
          class="filter-select sort-select"
          [disabled]="isLoading"
        >
          <option value="name">Name</option>
          <option value="price">Price</option>
          <option value="rating">Rating</option>
          <option value="studentsEnrolled">Popularity</option>
        </select>
        <button
          (click)="toggleSortOrder()"
          class="sort-order-btn"
          [class.desc]="filterValues.sortOrder === 'desc'"
          [title]="filterValues.sortOrder === 'asc' ? 'Sort Descending' : 'Sort Ascending'"
          [disabled]="isLoading"
          type="button"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M7 16V4m0 0L3 8m4-4l4 4M17 8v12m0 0l4-4m-4 4l-4-4" *ngIf="filterValues.sortOrder === 'asc'"></path>
            <path d="M7 8v12m0 0l-4-4m4 4l4-4M17 16V4m0 0l4 4m-4-4l-4 4" *ngIf="filterValues.sortOrder === 'desc'"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Active Filters and Clear Button -->
  <div class="filter-actions" *ngIf="hasActiveFilters()">
    <div class="active-filters">
      <span class="active-filters-label">Active filters ({{ getActiveFilterCount() }}):</span>
      
      <div class="filter-tags">
        <span class="filter-tag" *ngIf="filterValues.searchTerm">
          Search: "{{ filterValues.searchTerm }}"
          <button (click)="onSearchInput({target: {value: ''}} as any)" class="remove-filter" type="button">×</button>
        </span>
        
        <span class="filter-tag" *ngIf="filterValues.selectedCategory">
          Category: {{ filterValues.selectedCategory }}
          <button (click)="onCategoryChange('')" class="remove-filter" type="button">×</button>
        </span>
        
        <span class="filter-tag" *ngIf="filterValues.selectedLevel">
          Level: {{ filterValues.selectedLevel }}
          <button (click)="onLevelChange('')" class="remove-filter" type="button">×</button>
        </span>
        
        <span class="filter-tag" *ngIf="filterValues.selectedDuration">
          Duration: {{ filterValues.selectedDuration }}
          <button (click)="onDurationChange('')" class="remove-filter" type="button">×</button>
        </span>
      </div>
    </div>

    <button (click)="onClearFilters()" class="clear-all-btn" [disabled]="isLoading" type="button">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 6h18l-2 13H5L3 6zM8 6V4a2 2 0 012-2h4a2 2 0 012 2v2"></path>
        <line x1="10" y1="11" x2="10" y2="17"></line>
        <line x1="14" y1="11" x2="14" y2="17"></line>
      </svg>
      Clear All Filters
    </button>
  </div>

  <!-- Results Summary -->
  <div class="results-summary" *ngIf="!isLoading">
    <div class="results-text">
      <span class="results-count">{{ filteredResults }}</span> of 
      <span class="total-count">{{ totalResults }}</span> courses
      <span *ngIf="hasActiveFilters()" class="filtered-indicator">(filtered)</span>
    </div>
    
    <div class="results-actions" *ngIf="filteredResults === 0 && hasActiveFilters()">
      <p class="no-results-text">No courses match your current filters.</p>
      <button (click)="onClearFilters()" class="clear-filters-suggestion" type="button">
        Try clearing some filters
      </button>
    </div>
  </div>
</div>